(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{464:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("Boxx"),t._v(" "),s("p",[t._v("将 "),s("a",{attrs:{href:"https://www.vuepress.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress"),s("OutboundLink")],1),t._v(" 博客的本地构建过程转移到 "),s("a",{attrs:{href:"https://github.com/features/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("github-actions"),s("OutboundLink")],1),t._v(" 中，同时支持将构建结果自动部署到  "),s("code",[t._v("GitHub Pages")]),t._v(" 及 "),s("code",[t._v("linux服务器")])]),t._v(" "),s("h2",{attrs:{id:"开头"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开头"}},[t._v("#")]),t._v(" 开头")]),t._v(" "),s("p",[t._v("最近学了挺多东西，一直苦于没有一个很好的知识储备平台，所以自己动手搭建了一个 "),s("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("recoluan"),s("OutboundLink")],1),t._v(" 大佬基于 "),s("a",{attrs:{href:"https://www.vuepress.cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress"),s("OutboundLink")],1),t._v(" 封装的 "),s("Badge",{attrs:{text:"清新脱俗",type:"success",vertical:"middle"}}),t._v("  的主题博客，准备将自己学习到的知识都记录并分享给大家。")],1),t._v(" "),s("p",[t._v("但是，当在我写完一篇文章时，并想将文章同步到  "),s("code",[t._v("GitHub Pages")]),t._v(" 或者  "),s("code",[t._v("自定义服务器")]),t._v(" 上时，感觉还是特别的麻烦，流程非常繁琐：")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("优化前流程")]),t._v(" "),s("ol",[s("li",[t._v("写一篇文章")]),t._v(" "),s("li",[t._v("生成静态文件："),s("code",[t._v("npm run build")])]),t._v(" "),s("li",[t._v("切换  "),s("code",[t._v("gh-pages")]),t._v("  分支")]),t._v(" "),s("li",[t._v("复制静态文件到  "),s("code",[t._v("gh-pages")]),t._v("  分支")]),t._v(" "),s("li",[t._v("访问网址验证是否成功")])])])]),t._v(" "),s("p",[t._v("于是终于一顿冲浪，让我找到了 "),s("em",[s("strong",[t._v("Lasy")])]),t._v(" 的 "),s("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/views/other/github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用 GitHub Actions 自动部署博客"),s("OutboundLink")],1)]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("优化后流程")]),t._v(" "),s("ol",[s("li",[t._v("写一篇文章")]),t._v(" "),s("li",[t._v("上传到 "),s("code",[t._v("Github")]),t._v(" 仓库 "),s("code",[t._v("main")]),t._v(" 分支")]),t._v(" "),s("li",[t._v("刷新网页，OK，慢慢享受吧")])])])]),t._v(" "),s("p",[t._v("好，不多说了，我相信博主们已经对 "),s("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress-theme-reco"),s("OutboundLink")],1),t._v("非常熟悉了，在这里就不多说了，如果有项目配置不明白的地方，请移步"),s("a",{attrs:{href:"https://vuepress-theme-reco.recoluan.com/views/1.x/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vuepress-theme-reco@1.x官方文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("本文主要给大家分享下本次搭建  "),s("code",[t._v("GitHub Actions")]),t._v("  自动部署的方法。")])]),t._v(" "),s("h2",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),s("ol",[s("li",[s("em",[s("strong",[t._v("一个完善的可以 "),s("code",[t._v("yarn build")]),t._v(" 成功的博客工程，但要注意你编译后的文件路径为 "),s("code",[t._v("/dist")]),t._v("，workflow中会用到。")])])]),t._v(" "),s("li",[s("em",[s("strong",[t._v("一个 "),s("code",[t._v("GitHub repo")]),t._v(" 。")])])]),t._v(" "),s("li",[s("em",[s("strong",[t._v("一台支持 "),s("code",[t._v("SFTP")]),t._v(" 的远程Linux服务器，并且配置好通过 "),s("code",[t._v("SFTP")]),t._v(" 密钥登录。")])])])]),t._v(" "),s("h3",{attrs:{id:"_1、创建一个blog项目并编译"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建一个blog项目并编译"}},[t._v("#")]),t._v(" 1、创建一个blog项目并编译")]),t._v(" "),s("p",[t._v("创建项目这里不多说了，唯一一点是在不说的过程中出现的问题，我提一嘴")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M12 8v4"}}),s("path",{attrs:{d:"M12 16h.01"}})])]),s("p",{staticClass:"title"},[t._v("注意，**node_models** 中依赖的版本需要锁定！！！")]),s("p",[t._v("不管vuepress项目是以 "),s("code",[t._v("npm run build")]),t._v(" 来编译，还是使用 "),s("code",[t._v("yarn build")]),t._v(" 来编译，一定要在项目中生成  "),s("strong",[t._v("lock")]),t._v(" 文件，"),s("strong",[t._v("缓存")]),t._v(" 并 "),s("strong",[t._v("锁定")]),t._v(" 好你项目中每个依赖的版本以及依赖之间的关系，这个特别重要，因为GitHub中的依赖版本不一定能兼容本地工程的依赖版本，如有不懂，请移步 "),s("a",{attrs:{href:"https://yarn.bootcss.com/docs/yarn-lock/",target:"_blank",rel:"noopener noreferrer"}},[t._v("yarn.lock官方网站"),s("OutboundLink")],1),t._v("。")])]),s("p",[t._v("这里附上我的  "),s("Badge",{attrs:{text:"config.js",type:"success",vertical:"middle"}}),t._v("   配置文件供大家参考")],1),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nav "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./config/nav"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" siderbarConf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./config/sidebar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" pluginsConf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./plugins/index'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sourceUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://blog.rayshine.site/source"')]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("base")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("title")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"一ξひβθ光 i"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("description")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'乾坤未定 你我皆是黑马'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dest")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dist'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("head")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meta"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"viewport"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"width=device-width,initial-scale=1,user-scalable=no"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"meta"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"baidu-site-verification"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code-U0ZDB2tiQp"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"link"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rel")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"icon"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/favicon.ico"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"language"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"javascript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/javascript"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"src"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"script"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://cdn.bootcdn.net/ajax/libs/typed.js/2.0.12/typed.min.js"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("theme")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reco"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("markdown")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lineNumbers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mode")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auto"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("locales")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"/"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"lang"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zh-CN'")]),t._v("\n\t  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("themeConfig")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//首页样式")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("back")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("isRandom")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bgImage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sourceUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/1.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("bgUrls")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        sourceUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/1.jpg'")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("noFoundPageByTencent")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("indexTitle")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"看走眼的东西，要及时扔掉。抓不住的东西，伸手都是多余。"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("indexDes")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Throw away the wrong things in time, what you can\'t grasp is superfluous."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//是否全屏样式 true，false")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fullscreen")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//全屏模式下才应用 分类图片 不填或者默认为随机")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("categoryPic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tagPic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timePic")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("modePicker")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"blog"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 博客设置")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("blogConfig")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("category")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在导航栏菜单中所占的位置，默认2")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"博客"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 “分类”Category")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("tag")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("location")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 在导航栏菜单中所占的位置，默认3")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("text")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"标签"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认 “标签”Tag")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("valineConfig")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("appId")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// your appId")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("appKey")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// your appKey")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("placeholder")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'请务必填写联系方式，方便及时回复！'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("pageSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("enableQQ")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("recordIP")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("visitor")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      \n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 导航栏")]),t._v("\n    nav"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自定义左侧侧边栏")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sidebar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" siderbarConf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logo")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sourceUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/home/logo.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("authorAvatar")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" sourceUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/avatar/avatar.jpg"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 搜索设置")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("search")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("searchMaxSuggestions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最后更新时间")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lastUpdated")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Last Updated"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 作者")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("author")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ray Shine"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 备案号")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'辽ICP备2021012735'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 备案连接地址")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("recordLink")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 项目开始时间")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("startYear")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2020"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("socials")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("github")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/RayshineHub"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//github")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gitlub")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//gitlub")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("gitee")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://gitee.com/RayshineHub"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//gitee")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("jianshu")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//简书")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("zhihu")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//知乎")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("toutiao")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//知乎")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("juejin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//掘金")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("segmentfault")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//思否")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("csdn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//CSDN")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("wechat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你的微信"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//微信")]),t._v("\n\t\t  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("qq")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你的QQ"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//QQ")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//首页格言")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("mottos")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"zh"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"看走眼的东西，要及时扔掉。抓不住的东西，伸手都是多余。"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Throw away the wrong things in time, what you can\'t grasp is superfluous."')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" pluginsConf\n "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n")])])]),s("p",[t._v("个人推荐使用 "),s("code",[t._v("yarn")]),t._v(" 来安装依赖，具体有什么好处呢？又有什么作用呢？")]),t._v(" "),s("p",[s("strong",[t._v("特点")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("极其快速：Yarn会缓存它下载的每个包，所以无需重复下载。它还能并行化操作以最大化资源利用率。")]),t._v(" "),s("li",[t._v("特别安全：Yarn会在每个安装包被执行前校验其完整性。")]),t._v(" "),s("li",[t._v("超级可靠：Yarn使用格式详尽而又简洁的lockfile文件和确定性算法来安装依赖，能够保证在一个系统上的运行的安装过程也会以同样的方式运行在其他系统上。")])]),t._v(" "),s("h3",{attrs:{id:"_2、github-创建仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、github-创建仓库"}},[t._v("#")]),t._v(" 2、"),s("a",{attrs:{href:"https://www.github.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub"),s("OutboundLink")],1),t._v(" 创建仓库")]),t._v(" "),s("ul",[s("li",[t._v("首先，准备工作，你得有一个自己的 "),s("code",[t._v("github")]),t._v(" 帐号，其次，你得安装了 "),s("code",[t._v("git")]),t._v(" 工具，最后你还得有自己的本地项目。")]),t._v(" "),s("li",[t._v("在 "),s("code",[t._v("github")]),t._v(" 上创建自己的远程 "),s("code",[t._v("Pages")]),t._v(" 专属代码仓库。")])]),t._v(" "),s("p",[t._v("**1、进入我的仓库 **")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/%E6%88%91%E7%9A%84GitHub%E4%BB%93%E5%BA%93.png",alt:"我的GitHub仓库"}})]),t._v(" "),s("p",[s("strong",[t._v("2、新建仓库")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/create-github-pages-repo.png",alt:"创建用于发布的GitHub Pages的代码仓库"}})]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M10 10l4 4m0-4l-4 4"}})])]),s("p",{staticClass:"title"}),s("p",[s("strong",[t._v("注意")])]),t._v(" "),s("ul",[s("li",[t._v("一定要把仓库名称命名为 "),s("code",[t._v("用户名.github.io")]),t._v(" ，这样在创建 "),s("code",[t._v("GitHub Pages")]),t._v(" 是才能直接访问。")]),t._v(" "),s("li",[t._v("一定要将仓库权限设置为 "),s("code",[t._v("Public")]),t._v(" 公开。")]),t._v(" "),s("li",[t._v("一定要勾选下方任意一个初始化文件，不然仓库提交/拉取代码时，不够方便。")])])]),s("h3",{attrs:{id:"_3、远程服务器配置sftp及密钥登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、远程服务器配置sftp及密钥登录"}},[t._v("#")]),t._v(" 3、远程服务器配置"),s("code",[t._v("SFTP")]),t._v("及"),s("code",[t._v("密钥")]),t._v("登录")]),t._v(" "),s("p",[t._v("由于vsftp采用明文传输，用户名密码可通过抓包得到，为了安全性，需使用sftp，锁定目录且不允许sftp用户登到服务器。由于sftp使用的是ssh协议，需保证用户只能使用sftp，不能ssh到机器进行操作，且使用密钥登陆、不是22端口。")]),t._v(" "),s("h4",{attrs:{id:"_1-创建-sftp服务用户组-并创建-sftp服务根目录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建-sftp服务用户组-并创建-sftp服务根目录"}},[t._v("#")]),t._v(" 1. 创建 "),s("code",[t._v("sftp服务用户组")]),t._v(" 并创建 "),s("code",[t._v("sftp服务根目录")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建SFTP用户组")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("groupadd")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建该用户组的根目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/sftp\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置该目录所属账户")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R root:sftp /home/sftp\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 授权该目录 775 权限")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" -R 0755 /home/sftp\n")])])]),s("p",[t._v("此目录及上级目录的所有者必须为 "),s("code",[t._v("root")]),t._v("，权限不高于 "),s("code",[t._v("755")]),t._v(" ，此目录的组最好设定为 "),s("code",[t._v("sftp")]),t._v(" 。")]),t._v(" "),s("h4",{attrs:{id:"_2、修改-sshd-配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、修改-sshd-配置文件"}},[t._v("#")]),t._v(" 2、修改 "),s("code",[t._v("sshd")]),t._v(" 配置文件")]),t._v(" "),s("ul",[s("li",[t._v("先备份再修改")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 备份配置文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" /etc/ssh/sshd_config,_bk"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 保证原来22端口可以继续使用")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sed")]),t._v(" -i "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s@#Port 22@Port 22@'")]),t._v(" /etc/ssh/sshd_config \n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 修改sshd_config文件内容")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/ssh/sshd_config\n")])])]),s("ul",[s("li",[t._v("注释掉下面这行代码")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("Subsystem   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v("  /usr/libexec/openssh/sftp-server\n")])])]),s("ul",[s("li",[t._v("添加如下代码")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 必须将 Subsystem 这行代码修改为下面这行，不然重启ssh会报错")]),t._v("\nSubsystem "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v(" internal-sftp -l INFO -f AUTH\nMatch Group "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v("\nChrootDirectory /home/sftp/%u\nX11Forwarding no\nAllowTcpForwarding no\nForceCommand internal-sftp -l INFO -f AUTH\n")])])]),s("p",[t._v("凡是在 "),s("code",[t._v("用户组sftp")]),t._v(" 里的用户，都可以使用sftp服务；使用sftp服务连接上之后，可访问目录为 "),s("code",[t._v("/home/sftp/username")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("举个例子")])]),t._v(" "),s("p",[t._v("1、"),s("Badge",{attrs:{text:"test",type:"error",vertical:"middle"}}),t._v("  是一个 "),s("code",[t._v("sftp组")]),t._v(" 的用户，它通过 "),s("code",[t._v("sftp")]),t._v(" 连接服务器上之后，只能看到 "),s("code",[t._v("/home/sftp/test")]),t._v(" 目录下的内容。")],1),t._v(" "),s("p",[t._v("2、"),s("Badge",{attrs:{text:"test2",type:"error",vertical:"middle"}}),t._v(" 也是一个 "),s("code",[t._v("sftp组")]),t._v(" 的用户，它通过 "),s("code",[t._v("sftp")]),t._v(" 连接服务器之后，只能看到 "),s("code",[t._v("/data/sftp/test2")]),t._v(" 目录下的内容。")],1),t._v(" "),s("h4",{attrs:{id:"_3、创建-sftp用户"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、创建-sftp用户"}},[t._v("#")]),t._v(" 3、创建 "),s("code",[t._v("sftp用户")])]),t._v(" "),s("ul",[s("li",[t._v("创建test sftp "),s("code",[t._v("家目录")]),t._v(" ：test目录的所有者必须是 "),s("code",[t._v("root")]),t._v("，组别最好设定为 "),s("code",[t._v("sftp组")]),t._v("，权限不高于 "),s("code",[t._v("755")]),t._v("。")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/sftp/test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" 0755 /home/sftp/test\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" root:sftp /dahometa/sftp/test\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加用户，参数 -g sftp 指定用户组 -s /sbin/nologin禁止用户通过命令行登录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("useradd")]),t._v(" -g "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v(" -s /sbin/nologin "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" \n")])])]),s("ul",[s("li",[t._v("创建test用户密钥对：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建完用户之后，需要在用户的根目录创建 .ssh 文件夹，存放ssh密钥")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/test/.ssh\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成密钥对")]),t._v("\nssh-keygen -t rsa\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将公钥添加到 authorized_keys 入口文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /root/.ssh/id_rsa.pub "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /home/test/.ssh/authorized_keys\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置test文件夹所有者设为 test.sftp")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R test.sftp /home/test\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置 authorized_keys 权限为600")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),t._v(" /home/test/.ssh/authorized_keys\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置 .ssh 文件夹目录为 700")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("700")]),t._v(" /home/test/.ssh\n")])])]),s("ul",[s("li",[t._v("在test目录下创建一个可以写入的source目录：将目录所有者设为 "),s("code",[t._v("test")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /home/sftp/test/source\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chown")]),t._v(" -R test:sftp /home/sftp/test/source\n")])])]),s("div",{staticClass:"custom-block danger"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M10 10l4 4m0-4l-4 4"}})])]),s("p",{staticClass:"title"},[t._v("注意")]),s("p",[t._v("1、 "),s("code",[t._v("sftp")]),t._v(" 服务的根目录的所有者必须是 "),s("code",[t._v("root")]),t._v("，权限不能超过 "),s("code",[t._v("755")]),t._v(" (上级目录也必须遵循此规则)，"),s("code",[t._v("sftp")]),t._v(" 的用户目录所有者也必须是"),s("code",[t._v("root")]),t._v(" ，且最高权限不能超过 "),s("code",[t._v("755")]),t._v("。")]),t._v(" "),s("p",[t._v("2、目前 "),s("code",[t._v("workflow")]),t._v(" 推送到远程服务器，如果是目录，会遇到权限不足的问题，就需要用 "),s("code",[t._v("test")]),t._v(" 用户登录 "),s("code",[t._v("FXP")]),t._v(" 工具将目录结构上传一份，再用 "),s("code",[t._v("workflow")]),t._v(" 推送后就没有问题了。")]),t._v(" "),s("p",[t._v("3、如果大家用了 "),s("code",[t._v("CentOS8")]),t._v(" 或者 "),s("code",[t._v("Openssl 1.1.1")]),t._v(" 及以上版本，使用命令 "),s("code",[t._v("ssh-keygen -t rsa")]),t._v(" 生成ssh，默认是以新的格式生成，id_rsa的第一行变成了 "),s("code",[t._v("BEGIN OPENSSH PRIVATE KEY")]),t._v(" 而不再是 "),s("code",[t._v("BEGIN RSA PRIVATE KEY")]),t._v(" ，这是一种新的密钥格式， 而且很多软件对这种格式的密钥都是不支持的。")]),t._v(" "),s("p",[s("code",[t._v("GitHub")]),t._v("目前不支持，所以就要用到一种转换命令将 "),s("a",{attrs:{href:"http://www.mayanpeng.cn/archives/132.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("BEGIN OPENSSH PRIVATE KEY")]),t._v(" 转换为 "),s("code",[t._v("BEGIN RSA PRIVATE KEY")]),t._v(" 格式"),s("OutboundLink")],1),t._v("，为大家提供了两种解决方案。")]),t._v(" "),s("ul",[s("li",[t._v("一、生成新的RSA-PEM格式公私密钥")]),t._v(" "),s("li",[t._v("二、转换格式")])]),t._v(" "),s("p",[t._v("目前我这边要求不是很高，也不是生产环境，所以直接采用了第一种解决方案，重新生成了新的公私密钥；")]),t._v(" "),s("p",[t._v("大概其实是用了命令 "),s("code",[t._v("ssh-keygen -m PEM -t rsa -b 4096")]),t._v(" 来生成")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("参数解释")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-m： 参数指定密钥的格式，PEM（也就是RSA格式）是之前使用的旧格式")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-b：指定密钥长度；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-e：读取openssh的私钥或者公钥文件；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-C：添加注释；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-f：指定用来保存密钥的文件名；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-i：读取未加密的ssh-v2兼容的私钥/公钥文件，然后在标准输出设备上显示openssh兼容的私钥/公钥；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-l：显示公钥文件的指纹数据；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-N：提供一个新密语；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-P：提供（旧）密语；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-q：静默模式；")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-t：指定要创建的密钥类型")])])])])]),s("ul",[s("li",[t._v("设置 ssh，打开密钥登录功能")])]),t._v(" "),s("p",[t._v("编辑 "),s("code",[t._v("sshd_config")]),t._v("  文件")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/ssh/sshd_config\n")])])]),s("p",[t._v("进行如下设置：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("RSAAuthentication "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("\nPubkeyAuthentication "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("\n")])])]),s("p",[t._v("另外，请留意 "),s("code",[t._v("root")]),t._v(" 用户能否通过 "),s("code",[t._v("SSH")]),t._v(" 登录：")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("PermitRootLogin "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("\n")])])]),s("h4",{attrs:{id:"_4、重启-sshd-服务-查看服务状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、重启-sshd-服务-查看服务状态"}},[t._v("#")]),t._v(" 4、重启 "),s("code",[t._v("SSHD")]),t._v(" 服务，查看服务状态")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("CentOS 7")]),t._v(" 以下：")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看状态")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" sshd status\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" sshd start\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" sshd restart\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭服务")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" sshd stop\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置开机自启动 (–level 指定系统在2345运行级别时)。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chkconfig")]),t._v(" --level "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2345")]),t._v(" sshd on\n")])])]),s("ul",[s("li",[s("code",[t._v("CentOS 7")]),t._v("及以上")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看状态")]),t._v("\nsystemctl status sshd.service\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动服务")]),t._v("\nsystemctl start sshd.service\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启服务")]),t._v("\nsystemctl restart sshd.service\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 关闭服务")]),t._v("\nsystemctl stop sshd.service\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置开机自启动")]),t._v("\nsystemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" sshd.service\n")])])]),s("h4",{attrs:{id:"_5、sftp-测试"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、sftp-测试"}},[t._v("#")]),t._v(" 5、"),s("code",[t._v("SFTP")]),t._v(" 测试")]),t._v(" "),s("ul",[s("li",[t._v("测试命令如下")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sftp")]),t._v(" -oIdentityFile"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/blog_sftp/.ssh/id_rsa.pem test@yourHost -oProt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v("\n")])])]),s("h2",{attrs:{id:"上流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上流程"}},[t._v("#")]),t._v(" 上流程")]),t._v(" "),s("h3",{attrs:{id:"_1、在项目根目录下创建-deploy-yml-文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、在项目根目录下创建-deploy-yml-文件"}},[t._v("#")]),t._v(" 1、在项目根目录下创建 "),s("code",[t._v("deploy.yml")]),t._v(" 文件")]),t._v(" "),s("p",[s("code",[t._v("deploy.yml")]),t._v(" 文件为 "),s("code",[t._v("GitHub Actions")]),t._v(" 执行的命令文件，"),s("code",[t._v("·workflow")]),t._v(" 触发之后，"),s("code",[t._v("GitHub")]),t._v(" 会自动读取项目根目录中的 "),s("code",[t._v(".github/workflows/***.yml")]),t._v(" 去执行。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/github-actions-yml%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_2、编写脚本-deploy-yml"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、编写脚本-deploy-yml"}},[t._v("#")]),t._v(" 2、编写脚本 "),s("code",[t._v("deploy.yml")])]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 任务名称")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Pages\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 触发条件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 当项目文件 push 到 main 分支后")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(" prod "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# A workflow run is made up of one or more jobs that can run sequentially or in parallel")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# job名称")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build-and-deploy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 服务器环境：最新版 Ubuntu")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ubuntu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# action奇妙的步骤")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 拉取代码")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Checkout\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("persist-credentials")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n          \n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Use Node.js\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("node@v1\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node-version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"14"')]),t._v("\n          \n          \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 缓存 node_modules")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Cache dependencies\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/cache@v2\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            **/node_modules")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" runner.os "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("$"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" hashFiles('"),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("**/yarn.lock')")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restore-keys")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),s("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n            ${{ runner.os }}-yarn-")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 如果缓存没有命中的话，编译&生成静态文件，可以用yarn或npm")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" build\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" steps.yarn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache.outputs.cache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("hit "),s("span",{pre:!0,attrs:{class:"token tag"}},[t._v("!=")]),t._v(" 'true'\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" yarn "),s("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" yarn build\n\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到github.io静态网站")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Docs To GitHub Pages\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" JamesIves/github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@releases/v4\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git-config-name: ***")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# token: ${{ secrets.BLOG_DEPLOY }}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("clean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# repository-name: RayShineHub/RayShineHub.github.io")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("folder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dist\n          \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到gitee.io静态网站")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Docs To Gitee Pages\n       "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wearerequired/git"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("mirror"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v1\n       "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("SSH_PRIVATE_KEY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.SSH_PRIVATE_KEY "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#SSH_KNOWN_HOSTS: ${{ secrets.SSH_KNOWN_HOSTS }}")]),t._v("\n       "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("source-repo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@github.com:wearerequired/git-mirror-action.git"')]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("destination-repo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git@bitbucket.org:wearerequired/git-mirror-action.git"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" reload\n       "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mizuka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("wu/gitee"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pages"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("action@v1.0.0\n       "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("repository")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" linzowo/linzowo\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cookie")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITEE_COOKIE "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n         "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gh_pages\n          \n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 部署到远程服务器")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deploy Docs To Remote Server\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" wlixcc/SFTP"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Deploy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("Action@v1.0\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("with")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 远程服务器SFTP用户")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'blog_sftp'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 远程服务器IP地址")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("server")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${{ secrets.SERVER_IP_ALIYUN }}'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 远程服务器ssh私钥")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ssh_private_key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${{ secrets.SSH_PRIVATE_KEY_ALIYUN }}'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 项目编译后输出文件路径")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("local_path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dist/*'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SFTP用户家目录下可以写入的文件夹路径 eg：/home/sftp/blog")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("remote_path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/blog'")]),t._v("\n")])])]),s("div",{staticClass:"custom-block danger"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M10 10l4 4m0-4l-4 4"}})])]),s("p",{staticClass:"title"},[t._v("严重")]),s("p",[t._v("部署到远程服务器时需要用到远程服务器的 "),s("code",[t._v("SFTP用户名")]),t._v("、"),s("code",[t._v("IP地址")]),t._v("、"),s("code",[t._v("ssh私钥")]),t._v("，这些内容都是对于服务器来讲比较重要的信息，所以不建议将这些内容 "),s("Badge",{attrs:{text:"明文",type:"error",vertical:"middle"}}),t._v("  存放到 "),s("code",[t._v("GitHub")]),t._v(" 中，所以将他们保存到 "),s("code",[t._v("Github仓库密钥")]),t._v(" 中，供 "),s("code",[t._v("GitHub")]),t._v(" 使用。")],1),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/Github%E4%BB%93%E5%BA%93%E5%AF%86%E9%92%A5.png",alt:"GitHub仓库密钥"}})])]),s("h3",{attrs:{id:"_3、在项目根目录下创建自动编译及-github-代码提交脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、在项目根目录下创建自动编译及-github-代码提交脚本"}},[t._v("#")]),t._v(" 3、在项目根目录下创建自动编译及 "),s("code",[t._v("GitHub")]),t._v(" 代码提交脚本")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/usr/bin/env sh")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" -e\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#\t检验build是否成功")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf ./dist   "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./dist是build之后文件夹的位置，即config.js中配置的dest，详见vuepress官网")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交到main分支")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'deploy'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 发布到github的prod分支，触发工作流同步到Linux服务器")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout prod\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" -p "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"请输入本次发版内容："')]),t._v(" msg\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" merge -m "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$msg")]),t._v(" origin main\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout main\n")])])]),s("h3",{attrs:{id:"_4、在-package-json-中加入命令-deploy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、在-package-json-中加入命令-deploy"}},[t._v("#")]),t._v(" 4、在 "),s("code",[t._v("package.json")]),t._v(" 中加入命令 "),s("code",[t._v("deploy")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress dev src"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress build src"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"upcdn"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vuepress build src && node ./scripts/upcdn.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"deploy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bash deploy.sh"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"push"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bash push.sh"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])]),s("h3",{attrs:{id:"_5、md文件编写完成并运行-deploy-命令发布"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、md文件编写完成并运行-deploy-命令发布"}},[t._v("#")]),t._v(" 5、md文件编写完成并运行 "),s("code",[t._v("deploy")]),t._v(" 命令发布")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" deploy\n")])])]),s("ul",[s("li",[t._v("发布成功截图")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/%E5%8D%9A%E5%AE%A2%E5%8F%91%E5%B8%83%E6%88%90%E5%8A%9F.png",alt:"博客发布成功"}})]),t._v(" "),s("h2",{attrs:{id:"最终结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#最终结果"}},[t._v("#")]),t._v(" 最终结果")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/github-action-success.png",alt:"workflow运行成功"}})])],1)}),[],!1,null,null,null);s.default=e.exports}}]);