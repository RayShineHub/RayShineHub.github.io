(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{468:function(t,s,a){"use strict";a.r(s);var n=a(2),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("blockquote",[s("p",[t._v("记录 "),s("strong",[s("code",[t._v("Transition")])]),t._v(" 过渡动画在执行的过程中一直丢帧的问题。关键在于 "),s("strong",[s("code",[t._v("will-change: transform;")])]),t._v(" 属性。")])]),t._v(" "),s("p",[t._v("最近写了一个 "),s("code",[t._v("Vurpress")]),t._v(" "),s("strong",[t._v("沉浸式音乐播放器")]),t._v("，在体验的过程中，每当第一次打开"),s("a",{attrs:{href:"https://blog.rayshine.site",target:"_blank",rel:"noopener noreferrer"}},[t._v("博客首页"),s("OutboundLink")],1),t._v("，然后再打开音乐播放软件的时候，总是出现 "),s("strong",[t._v("卡顿")]),t._v("、"),s("strong",[t._v("丢帧")]),t._v(" 的现象，这里记录下整个问题的优化过程，也为大家提供个解决思路。")]),t._v(" "),s("h2",{attrs:{id:"优化过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化过程"}},[t._v("#")]),t._v(" 优化过程")]),t._v(" "),s("h3",{attrs:{id:"_1、感谢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、感谢"}},[t._v("#")]),t._v(" 1、感谢")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/48873834",target:"_blank",rel:"noopener noreferrer"}},[t._v("kaixuan - 总结下transition卡顿问题解决方案"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.lmlphp.com/user/151293/article/item/4695137/",target:"_blank",rel:"noopener noreferrer"}},[t._v("angularjs - 找出使用CSS3动画掉帧的原因"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_2、动画本身的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、动画本身的问题"}},[t._v("#")]),t._v(" 2、动画本身的问题")]),t._v(" "),s("p",[s("strong",[t._v("最早之前沉浸式播放器是通过修改 "),s("code",[t._v("Div")]),t._v(" 本身的 "),s("code",[t._v("Height")]),t._v(" 属性来完成的")])]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("immerse-wapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":style")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{height: open ? "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(": "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("0%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".immerse-wapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("top")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" all .3s ease-in-out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("那么效果如图：\n"),s("img",{attrs:{src:"https://cdn.rayshine.site/blog/NavPlayer/%E6%B2%89%E6%B5%B8%E5%BC%8F%E6%92%AD%E6%94%BE%E5%99%A8%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%E4%BC%98%E5%8C%96%E5%89%8Dheight%E9%97%AE%E9%A2%98.gif",alt:"沉浸式播放器过渡动画优化前height问题"}})]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M10 10l4 4m0-4l-4 4"}})])]),s("p",{staticClass:"title"}),s("p",[t._v("通过控制 "),s("code",[t._v("Div")]),t._v(" 本身的 "),s("code",[t._v("Height")]),t._v(" 属性虽然可以完成 "),s("strong",[t._v("自上而下")]),t._v(" 的过渡动画过程，但是这样会涉及到一个 "),s("code",[t._v("DOM树")]),t._v("的 "),s("a",{attrs:{href:"https://blog.csdn.net/qq_39998026/article/details/125441268",target:"_blank",rel:"noopener noreferrer"}},[t._v("重排和重绘"),s("OutboundLink")],1),t._v(" 的问题，这样非常影响浏览器的性能，导致画面出现卡顿，或者丢帧的现象，"),s("strong",[t._v("而像 "),s("code",[t._v("Transform")]),t._v(" 以及 "),s("code",[t._v("Opacity")]),t._v(" 这样的属性的改变则不会使DOM树进行重排重绘。")])])]),s("p",[t._v("优化后的代码如下：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 由改变 height 改为 通过 transfrom --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("immerse-wapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("immerse-wapper-open"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(": open}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".immerse-wapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* top: 0; */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("bottom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" all .3s ease-in-out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".immerse-wapper-open")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 开启硬件加速 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("webkit-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-moz-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-ms-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-o-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("经过 "),s("code",[t._v("Height")]),t._v(" 到 "),s("code",[t._v("Transfrom")]),t._v(" 的转变确实在性能上得到了很好的优化，但是依然还是会出现卡顿，丢帧的现象。")]),t._v(" "),s("h3",{attrs:{id:"_3、transfrom的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、transfrom的问题"}},[t._v("#")]),t._v(" 3、Transfrom的问题")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/blog/NavPlayer/%E6%B2%89%E6%B5%B8%E5%BC%8F%E6%92%AD%E6%94%BE%E5%99%A8%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%E4%BC%98%E5%8C%96%E5%89%8D.gif",alt:"沉浸式播放器过渡动画优化前"}})]),t._v(" "),s("p",[t._v("可以看到在整个 "),s("code",[t._v("Transition")]),t._v(" 过渡动画的过程中，播放器不止一次的出现卡顿，丢帧的现象，为了解决问题，让我们先学习使用谷歌浏览器 "),s("code",[t._v("DevTools")]),t._v(" 中的 "),s("code",[t._v("(性能)Performance")]),t._v(" 进行动画性能分析，如果需要请参考"),s("a",{attrs:{href:"https://www.51cto.com/article/661836.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/blog/NavPlayer/%E6%80%A7%E8%83%BD%E5%9B%BE%E4%BC%98%E5%8C%96%E5%89%8D.png",alt:"性能图优化前"}})]),t._v(" "),s("p",[t._v("通过性能分析报告，我们能看到，从 "),s("strong",[t._v("动画开始")]),t._v(" 一直到 "),s("strong",[t._v("动画结束")]),t._v("，出现了很多的 "),s("strong",[t._v("丢帧")]),t._v(" 或者 "),s("strong",[t._v("部分丢帧")]),t._v(" 的现象，在网上一顿冲浪，终于找到了关键属性 "),s("strong",[s("code",[t._v("will-change: transform;")])]),t._v("，它可以让我们 "),s("strong",[t._v("提前通知浏览器")]),t._v(" 我们将可能会对元素进行哪些更改，以便它可以在需要之前进行适当的优化。可以更改和更快地渲染元素，从而获得更流畅的体验。")]),t._v(" "),s("p",[t._v("让我们一起来看代码的优化：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("immerse-wapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("immerse-wapper-open"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(": open}"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-css extra-class"},[s("pre",{pre:!0,attrs:{class:"language-css"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".immerse-wapper")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("position")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" fixed"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* top: 0; */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("left")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("bottom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100%\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("will-change")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" transform"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 没错，我们只需要一行代码 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" all .3s ease-in-out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".immerse-wapper-open")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* 开启硬件加速 */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("webkit-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-moz-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-ms-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("-o-transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("translateY")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("100%"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("效果如下：")]),t._v(" "),s("img",{attrs:{src:"https://cdn.rayshine.site/blog/NavPlayer/%E6%B2%89%E6%B5%B8%E5%BC%8F%E6%92%AD%E6%94%BE%E5%99%A8%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%E4%BC%98%E5%8C%96%E5%90%8E.gif",alt:"沉浸式播放器过渡动画优化前"}})]),t._v(" "),s("p",[t._v("是不是流畅很多，而且丢帧的现象基本修复了 "),s("strong",[t._v("百分之99")]),t._v(" ，虽然治标不治本，但是至少算是一种解决思路。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.rayshine.site/blog/NavPlayer/%E6%80%A7%E8%83%BD%E5%9B%BE%E4%BC%98%E5%8C%96%E5%90%8E.png",alt:"性能图优化前"}})]),t._v(" "),s("h2",{attrs:{id:"知识点-will-change"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#知识点-will-change"}},[t._v("#")]),t._v(" 知识点 - will-change")]),t._v(" "),s("ul",[s("li",[t._v("它是做什么的呢")])]),t._v(" "),s("p",[t._v("CSS 是用来描述结构化文档（如HTML、XML）怎样渲染的语言。")]),t._v(" "),s("p",[t._v("CSS渲染器在渲染属性前，会有个准备的过程。有些属性需要css渲染器事先做很多准备才能实现渲染。这就容易导致页面出现卡顿，交互体验不好等问题。")]),t._v(" "),s("p",[t._v("如果设置了 "),s("code",[t._v("will-change")]),t._v(" 属性，那么浏览器就可以提前知道哪些元素的属性将会改变，提前做好准备。待需要改变元素的时机到来时，就可以立刻实现它们。从而避免卡顿等问题。")]),t._v(" "),s("blockquote",[s("p",[t._v("例如，使用 3D Transforms 让元素在屏幕上移动时，此元素和它的上下文会被提到另一个 “层” ，独立于其它元素被渲染。这样那些不变的元素就能避免被重复渲染。这可以显著提高性能。")])]),t._v(" "),s("p",[t._v("更多知识请参考"),s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change",target:"_blank",rel:"noopener noreferrer"}},[t._v("will-change - CSS:层叠样式表 | MDN"),s("OutboundLink")],1),t._v("。")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("svg",{staticClass:"svgIcon",attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[s("circle",{attrs:{cx:"12",cy:"12",r:"9"}}),s("path",{attrs:{d:"M12 8v4"}}),s("path",{attrs:{d:"M12 16h.01"}})])]),s("p",{staticClass:"title"}),s("p",[t._v("不要对太多元素使用 "),s("code",[t._v("will-change")]),t._v("，这会导致相反的结果,可能会引发一些十分耗费资源的优化措施。\n目前，"),s("code",[t._v("Chrome")]),t._v("，"),s("code",[t._v("Firefox")]),t._v("和 "),s("code",[t._v("Opera")]),t._v(" 支持此功能。它似乎得到了所有现代浏览器 "),s("strong",[t._v("in the future")]),t._v(" 的支持。")])])])}),[],!1,null,null,null);s.default=r.exports}}]);